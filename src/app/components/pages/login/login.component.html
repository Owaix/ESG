<section id="login">
    <div>
        <div class="login-container">
            <form (ngSubmit)="onSubmit()" #loginForm="ngForm">
                <h2>Sign into your account</h2>

                <div class="input-group">
                    <label for="email">Email</label>
                    <input type="text" id="email" name="email" [(ngModel)]="users.email" required
                        #emailField="ngModel" />
                    <div *ngIf="emailField.invalid && emailField.touched" class="error">
                        email is required
                    </div>
                </div>

                <div class="input-group">
                    <label for="password">Password</label>
                    <div style="position: relative;">
                        <input [type]="showPassword ? 'text' : 'password'" id="password" name="password"
                            [(ngModel)]="users.password" required
                            [ngClass]="{'is-invalid': passwordField.invalid && passwordField.touched}" minlength="6"
                            #passwordField="ngModel" pattern="(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-zA-Z]).{6,}" />
                        <button type="button" (click)="showPassword = !showPassword"
                            style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer;">
                            <img class="eye" *ngIf="showPassword" src="../../../../assets/images/hidden.png"
                                alt="Hide password">
                            <img class="eye" *ngIf="!showPassword" src="../../../../assets/images/eye.png"
                                alt="Show password">
                        </button>
                    </div>
                    <div *ngIf="passwordField.errors?.['minlength'] && passwordField.touched" class="error">
                        Password must be at least 6 characters long
                    </div>
                    <div *ngIf="passwordField.errors?.['pattern'] && passwordField.touched" class="error">
                        Password must contain at least one number, one special character, and one letter
                    </div>
                </div>
                <div style="text-align: center;margin-top: 10%;">
                    <button type="submit" class="btn" [disabled]="loginForm.invalid">Log in</button>
                </div>
            </form>
        </div>
    </div>
</section>

<app-modal *ngIf="isModalOpen" [errortitle]="errortitle" (close)="closeModal()">
    <h2>{{errortitle}}</h2>
    <p style="font-size: 19px;">{{errormsg}}</p>
</app-modal>